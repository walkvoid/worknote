# 计算机组成
## 冯诺依曼体系
在冯诺依曼计算机出现以前，程序是和硬件绑定的，冯诺依曼计算机创造性的将程序和硬件分离，使同一套硬件能够允许不同的程序，进而让计算器有了飞跃
式的发展，概括来说就是**存储程序，顺序执行**。冯诺依曼计算机有下面几个特点：
- 指令和数据均采用二进制格式；
- 指令和数据均存储在存储器中，而不是早期的插线板中，计算机按需从存储器中取指令和取数据；
- 由5个硬件组成：运算器、控制器、存储器、输入设备和输出设备。

参考:
- [三分钟带你了解冯.诺依曼结构](https://zhuanlan.zhihu.com/p/136748306)
- [一套用了 70 年的计算机架构 —— 冯·诺依曼架构](https://zhuanlan.zhihu.com/p/136748306)

## CPU
CPU（Central Processing Unit）中文译作中央处理器，CPU的结构主要由以下几部分组成：
- 控制单元（Control Unit）： 控制单元负责协调和控制CPU的操作。它解释存储在内存中的指令，将其发送到适当的执行单元，并监控整个处理过程。
```text
控制单元的主要功能有：
指令解码（Instruction Decoding）： 控制单元负责解释从内存中检索到的指令。这涉及将二进制指令转换为具体的控制信号，以便其他部件能够执行相应的操作。
时序控制（Timing Control）： 控制单元管理CPU内部各个部件的时序，确保它们在正确的时间执行相应的操作。时序控制与时钟信号紧密相关，以同步和协调整个CPU的操作。
分支控制（Branch Control）： 控制单元负责处理程序中的分支指令，例如条件分支和无条件分支。这包括确定下一条要执行的指令的位置。
中断处理（Interrupt Handling）： 当发生外部中断或异常时，控制单元负责管理CPU的响应。它会中断当前执行的指令流，跳转到相应的中断服务例程。
协调执行单元（Execution Units）： 控制单元与执行单元（如ALU）协作，确保指令的正确执行。它向执行单元发出必要的控制信号，以执行算术和逻辑运算。
```
- 算术逻辑单元（Arithmetic Logic Unit，ALU）： ALU执行算术和逻辑运算，包括加法、减法、乘法、除法等算术运算，以及与、或、非等逻辑运算。
```text
算术逻辑单元的主要功能如下：
算术运算： ALU能够执行各种算术运算，如加法、减法、乘法和除法。这些运算使CPU能够执行数字计算任务。
逻辑运算： ALU执行逻辑运算，包括与、或、非和异或等操作。这些运算对于处理逻辑条件和执行决策非常重要。
移位运算： ALU还能够执行位移操作，包括左移和右移。这对于处理二进制数据和进行位级操作很有用。
比较操作： ALU可以执行比较操作，用于确定两个值之间的关系，例如等于、大于或小于。
数据操作： ALU处理数据，这些数据通常存储在CPU的寄存器中。ALU通过在寄存器之间传递数据，执行各种运算。
状态标志位： ALU通常会设置状态标志位，这些标志位包括零标志、进位标志、溢出标志等，用于反映运算的结果或状态。
```
- 寄存器（Registers）： 寄存器是位于CPU内部的小型高速存储器单元，用于存储指令、数据和中间结果。寄存器的使用能够提高数据访问速度，因为它们比主存储器更快。
```text
一些常见类型的CPU寄存器：
数据寄存器（Data Registers）： 也称为通用寄存器，用于存储临时数据，包括运算过程中的中间结果。这些寄存器通常与算术逻辑单元（ALU）一起使用。
地址寄存器（Address Registers）： 存储内存地址，用于指示数据在内存中的位置。地址寄存器在进行内存访问时起着关键作用。
程序计数器（Program Counter，PC）： 存储当前正在执行的指令的地址，以指示下一条要执行的指令的位置。PC在程序流程控制方面非常重要。
指令寄存器（Instruction Register，IR）： 存储当前正在执行的指令，以便进行解码和执行。IR保存了从内存中检索到的指令的副本。
状态寄存器（Status Registers）： 也称为标志寄存器，包含有关CPU状态的信息，例如零标志、进位标志、溢出标志等。这些标志用于表示运算结果的一些特性。
栈指针寄存器（Stack Pointer，SP）： 用于指示栈中当前栈顶元素的地址。栈指针在函数调用和返回等操作中起着关键作用。
基址寄存器（Base Register）和变址寄存器（Index Register）： 用于执行基址寻址和变址寻址，有助于在内存中定位数据。
向量寄存器（Vector Registers）： 针对向量处理的CPU，用于存储和处理向量数据，提高并行计算性能。
```
- 时钟（Clock）： 时钟发出周期性的脉冲信号，驱动CPU的操作步骤。时钟速度通常以赫兹（Hz）为单位，表示每秒的脉冲数。时钟速度越高，CPU执行指令的速度越快。
```text
时钟源通常由晶振(晶体振荡器)或其他稳定的时钟发生器提供，有三个常见的周期：
时钟周期：由时钟信号定义的一个时间单位，表示时钟完成一个完整周期所需的时间，通常以纳秒（ns）或皮秒（ps）为单位表示。例如Intel i9 13900K型号
cpu的频率是5.8GHz，即1秒能运行58亿个周期，其时钟周期就是约为0.17ns。

CPU周期： CPU周期通常是指 CPU 执行一条指令所经历的基本时钟周期。CPU周期包括时钟周期的上升沿和下降沿，它是 CPU 内部同步和协调的基本时间单位。
在流水线（Pipeline）架构中，多个指令可能同时处于不同的阶段，因此每个时钟周期内可能有多个指令处于不同的执行阶段。

指令周期： 指令周期（也称为执行周期）是指 CPU 执行一条完整指令所需的时间。指令周期包括取指令、解码、执行、访存和写回等阶段。每个阶段可能需要不
同数量的 CPU周期。指令周期是指导 CPU 如何执行一条指令的时间概念。
```
- 缓存（Cache）： 缓存是一种高速临时存储器，用于暂时存储频繁访问的指令和数据。它可以提高数据访问速度，减少对主存储器的访问次数。
```text
L1 Cache： 一级缓存是距离CPU最近的缓存，通常分为指令缓存（L1i）和数据缓存（L1d）。它们集成在CPU核心内部，速度非常快，但容量有限。指令缓存用于存储处理器指令，
而数据缓存用于存储处理器访问的数据。 对于i9-13900K而言，L1 缓存被分为数据缓存（8 x 48 KB + 16 x 32 KB）和指令缓存（8 x 32 KB + 16 x 64 KB），总计 2.176 MB。
读写速度约为3500GB/s。

L2 Cache： 二级缓存位于一级缓存之后，通常在CPU内部或与CPU芯片相邻。L2 Cache的容量较大，速度相对较快，其主要任务是为L1 Cache提供更大的数据集，
并进一步提高数据访问速度。Intel i9 13900K单核的L2 Cache为2MB，（8 x 2 MB + 4 x 4 MB）总计 32 MB。Intel i9 13900K包含8个性能核心和16个能效核心，
16个能效核心中，只有4个有L2 cache。读写速度为800GB/s。

L3 Cache： 三级缓存是一些高端处理器中的可选部分，位于L2 Cache之后。L3 Cache的容量通常更大，速度相对较慢，但它可以为整个处理器提供更大的缓存池。
Intel i9 13900K的L3 Cache为36MB。读写速度为700GB/s。
```
参考：
- [i9-13900K评测](https://www.chiphell.com/thread-2452141-1-1.html)
